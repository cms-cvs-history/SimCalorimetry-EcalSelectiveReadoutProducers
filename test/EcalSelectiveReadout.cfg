process testECALDigi = 
{

  # input
  source = PoolSource {
     untracked vstring fileNames = {'file:simevent.root'}
     untracked int32 maxEvents = -1
     untracked uint32 debugVebosity = 10
     untracked bool   debugFlag     = true
  }

  #Geometry
  #
  include "Geometry/CMSCommonData/data/cmsSimIdealGeometryXML.cfi"
  # output
  module out = PoolOutputModule 
   {	
      untracked string fileName = 'digis.root'
   }

   module mix = MixingModule {
         secsource input = PoolRASource  {
		 untracked vstring fileNames = {'file:simevent.root'}
         string type = "poisson"
         double averageNumber = 0
         int32 minBunch = xxx
         int32 maxBunch = xxx
         int32 seed = 1234567
         }
         int32 bunchspace = 25
   }


# Calo geometry service model

   include "Geometry/CaloEventSetup/data/CaloGeometry.cfi"

# Calo geometry service model
   include "Geometry/CaloEventSetup/data/EcalTrigTowerConstituents.cfi"


  es_source = EcalTrivialConditionRetriever { }

  include "SimCalorimetry/EcalSimProducers/data/ecaldigi.cfi"

  module tp = EcalTrigPrimProducer {}

  include "SimCalorimetry/EcalSelectiveReadoutProducers/data/ecalSelectiveReadout.cfi"

  service = MessageLogger { 
    untracked vstring destination = {"cout"}
    PSet cout = { PSet default = { int32 limit32=0 } } 
  }

  path p = { mix, ecaldigi, tp, ecalSelectiveReadout }
  endpath fine = { out }

}

